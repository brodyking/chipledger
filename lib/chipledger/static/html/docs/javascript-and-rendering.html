<script>
    document.title = "Javascript and Rendering - Chipledger Docs";
</script>
<main id="main">
    <h2 class="mt-5" id="about-this-project">Javascript and Rendering</h2>
    <p>
        Almost the entire app is programmed on the front-end.
        Each page, componenent, action, etc, is all done through Javascript.
    </p>
    <h4 id="table-of-contents">
        Table of Contents
    </h4>
    <p>
    <ol>
        <li>
            <a href="#file-system">File System</a>
        </li>
        <li>
            <a href="#splash">Splash</a>
        </li>
        <li>
            <a href="#components">Components</a>
        </li>
        <li>
            <a href="#footer-head">Footer</a>
        </li>
        <li>
            <a href="#pages">Pages</a>
            <ol>
                <li>
                    <a href="#settings-special-functions">Settings Special Functions</a>
                </li>
            </ol>
        </li>
        <li>
            <a href="#view">View</a>
        </li>
    </ol>
    </p>
    <h4 id="file-system">
        File System
    </h4>
    <p>
        All of the actions are seperated into different files. Here are all of them.
    </p>
    <div class="table-responsive">
        <table class="table table-striped border">
            <thead>
                <td>Name</td>
                <td>File Name</td>
                <td>Description</td>
                <td>Auth Required</td>
            </thead>
            <tbody>
                <tr>
                    <td>Components</td>
                    <td>/lib/chipledger/js/components.js</td>
                    <td>Stores individual componenent that are NOT shared across pages.</td>
                    <td><i class="bi bi-check text-success"></i></td>
                </tr>
                <tr>
                    <td>Footer</td>
                    <td>/lib/chipledger/js/footer.js</td>
                    <td>Fills the footer element at the bottom of the screen. Has theme switcher menu.</td>
                    <td><i class="bi bi-x text-danger"></i></td>
                </tr>
                <tr>
                    <td>Pages</td>
                    <td>/lib/chipledger/js/pages.js</td>
                    <td>All pages for those <b>logged in</b>. Such as settings, games, etc.</td>
                    <td><i class="bi bi-check text-success"></i></td>
                </tr>
                <tr>
                    <td>Splash</td>
                    <td>/lib/chipledger/js/splash.js</td>
                    <td>The splash page, also contains login and register page.</td>
                    <td><i class="bi bi-x text-danger"></i></td>
                </tr>
                <tr>
                    <td>Theme Switcher</td>
                    <td>/lib/chipledger/js/themeswitcher.js</td>
                    <td>Stores the code behind changing the color of the navigation bar and light/dark themes.</td>
                    <td><i class="bi bi-x text-danger"></i></td>
                </tr>
                <tr>
                    <td>View</td>
                    <td>/lib/chipledger/js/views.js</td>
                    <td>Contains all the code behind the view game page. </td>
                    <td><i class="bi bi-check text-success"></i></td>
                </tr>
            </tbody>
        </table>
    </div>
    <h4 id="splash">
        Splash
    </h4>
    <p>
        The Splash page, which is shown to users who are <b>not logged in</b>, is controlled by <code>splash.js</code>.
    </p>
    <div class="table-responsive">
        <table class="table table-striped border">
            <thead>
                <td>Name</td>
                <td>Function</td>
                <td>Async</td>
                <td>Description</td>
            </thead>
            <tbody>
                <tr>
                    <td>Login</td>
                    <td><code>login()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Makes a network call to the login api, if successful refreshes page.</td>
                </tr>
                <tr>
                    <td>Login Alert</td>
                    <td><code>loginAlert()</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Shows or hides an error message inside of the login dialog.</td>
                </tr>
                <tr>
                    <td>Register</td>
                    <td><code>register()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Makes a network call to the register api, if successful refreshes page.</td>
                </tr>
                <tr>
                    <td>Register Alert</td>
                    <td><code>registerAlert()</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Shows or hides an error message inside of the register dialog.</td>
                </tr>
                <tr>
                    <td>Set Page</td>
                    <td><code>setPage(pageName)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Sets the current url. Used when clicking the register or login buttons.</td>
                </tr>
            </tbody>
        </table>
    </div>
    <p>
        Each time a user clicks on register or login, the url is changed to be <code>/login</code> or
        <code>/register</code>.
    </p>
    <p>
        If the user goes to these links beforehand, the popup will open automatically.
    </p>
    <h4 id="components">Components</h4>
    <p>
        This file only includes the navigation at the moment, but can/will be used later on.
    </p>
    <div class="table-responsive">
        <table class="table table-striped border">
            <thead>
                <td>Name</td>
                <td>Function</td>
                <td>Async</td>
                <td>Description</td>
            </thead>
            <tbody>
                <tr>
                    <td>Show Navigation</td>
                    <td><code>showNav(pageSelected)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Shows the navigation and highlights the current url that is given as a param.</td>
                </tr>
            </tbody>
        </table>
    </div>
    <p>
        Pages that will highlight are <code>/home</code> and <code>/games</code>.
    </p>
    <h4 id="footer-head">Footer</h4>
    <p>
        This file includes no functions, and just generates a footer with the version attached.
    </p>
    <h4 id="pages">Pages</h4>
    <p>
        This file contains all pages on Chipledger. It is complex, and a little messy...
    </p>
    <div class="table-responsive">
        <table class="table table-striped border">
            <thead>
                <td>Name</td>
                <td>Function</td>
                <td>Async</td>
                <td>Description</td>
            </thead>
            <tbody>
                <tr>
                    <td>Set Params</td>
                    <td><code>setParams()</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Gets the current url parameters, and puts them into the array <code>paramList</code>.</td>
                </tr>
                <tr>
                    <td>Show Error</td>
                    <td><code>showError(message)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Shows an error at the top of the page. NOT used by view screen on games.</td>
                </tr>
                <tr>
                    <td>Delete Error</td>
                    <td><code>deleteError</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Clears the error message from the DOM.</td>
                </tr>
                <tr>
                    <td>Set Page</td>
                    <td><code>setPage(pageName)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Sets the URL on the browser, and adds it to the history.</td>
                </tr>
                <tr>
                    <td>Games Search</td>
                    <td><code>gamesSearch</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Code that makes the search work on the games list.</td>
                </tr>
                <tr>
                    <td>Games</td>
                    <td><code>games()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sets the page to <code>/games</code>, calls the API for a list of games, and creates the list.
                        Also creates a dialog for creating new games.</td>
                </tr>
                <tr>
                    <td>New Game</td>
                    <td><code>newgame()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Creates an API call to make a new game, if it is successful it sets the page to
                        <code>/view?game=</code>
                    </td>
                </tr>
                <tr>
                    <td>Home</td>
                    <td><code>home()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sets the page to <code>/home</code>, and calls the API for release notes.</td>
                </tr>
                <tr>
                    <td>Error 404</td>
                    <td><code>error404()</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Sets the document title to "Error 404" and fills dom with a 404 message.</td>
                </tr>
                <tr>
                    <td>Settings</td>
                    <td><code>settings()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sets the page to <code>/settings</code>, fills DOM with settings options, and contains more
                        special functions inside.</td>
                </tr>
                <tr>
                    <td>Tutorial</td>
                    <td><code>tutorial()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sets the page to <code>/tutorial</code>, and fills DOM with content from the data api.</td>
                </tr>
                <tr>
                    <td>Find Page</td>
                    <td><code>findPage(pathname)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Finds the page in a switch statement, and runs the pages function. It is ran once on the initial
                        pageload with <code>document.location.pathname.toLowerCase()</code> as the param, but is then
                        ran again when <code>popstate</code> is triggered.</td>
                </tr>
            </tbody>
        </table>
    </div>
    <h5 id="settings-special-functions">Settings Special Functions</h5>
    <p>Inside of the <code>settings()</code> function, there are many more functions.</p>
    <div class="table-responsive">
        <table class="table table-striped border">
            <thead>
                <td>Name</td>
                <td>Function</td>
                <td>Async</td>
                <td>Description</td>
            </thead>
            <tbody>
                <tr>
                    <td>Change Password</td>
                    <td><code>changePassword()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Calls the change password API.</td>
                </tr>
                <tr>
                    <td>Change Email</td>
                    <td><code>changeEmail()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Calls the change email API.</td>
                </tr>
                <tr>
                    <td>Delete Account</td>
                    <td><code>deleteAccount()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Calls the delete account API. If successful it refreshes the page.</td>
                </tr>
            </tbody>
        </table>
    </div>
    <h4 id="view">View</h4>
    <p>This file contains all the front-end logic behind showing games and interacting with them.</p>
    <div class="table-responsive">
        <table class="table table-striped border">
            <thead>
                <td>Name</td>
                <td>Function</td>
                <td>Async</td>
                <td>Description</td>
            </thead>
            <tbody>
                <tr>
                    <td>View</td>
                    <td><code>view()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Creates the View page, sets it to <code>/view</code>, checks if game is valid, and fills
                        contents of the page.</td>
                </tr>
                <tr>
                    <td>Error Show</td>
                    <td><code>errorShow(error)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Rehydrates the page, and shows an error at the top.</td>
                </tr>
                <tr>
                    <td>Hydrate</td>
                    <td><code>hydrate()</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Fills in information on the page with info inside of the <code>data</code> variable.</td>
                </tr>
                <tr>
                    <td>Rehydrate</td>
                    <td><code>rehydrate()</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Calls <code>hydrate()</code> alongside removing errors.</td>
                </tr>
                <tr>
                    <td>Add Player</td>
                    <td><code>addPlayer()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to add a player and rehyrates.</td>
                </tr>
                <tr>
                    <td>Add Buyin</td>
                    <td><code>addBuyin()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to add a buyin and rehyrates.</td>
                </tr>
                <tr>
                    <td>Add Cashout</td>
                    <td><code>addCashout()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to rename the game, sets the new name as a url param, and calls upon
                        <code>view()</code> again.</td>
                </tr>
                <tr>
                    <td>Edit Buyin</td>
                    <td><code>editBuyin()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to edit a buyin value, then rehydrates.</td>
                </tr>
                <tr>
                    <td>Edit Cashout</td>
                    <td><code>editCashout()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to edit a cashout value, then rehydrates.</td>
                </tr>
                <tr>
                    <td>Edit Buyin Render</td>
                    <td><code>editBuyinRender(...)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Fills in the form with all the data from the selected buyin to edit. Parameters are, in order,
                        <code>name, value, method, buyinId</code></td>
                </tr>
                <tr>
                    <td>Edit Cashout Render</td>
                    <td><code>editCashoutRender(...)</code></td>
                    <td><i class="bi bi-x text-danger"></i></td>
                    <td>Fills in the form with all the data from the selected cashout to edit. Parameters are, in order,
                        <code>name, value, method, cashoutId</code></td>
                </tr>
                <tr>
                    <td>Rename Game</td>
                    <td><code>addPlayer()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to add a player and rehyrates.</td>
                </tr>
                <tr>
                    <td>Delete Game</td>
                    <td><code>deleteGame()</code></td>
                    <td><i class="bi bi-check text-success"></i></td>
                    <td>Sends a API call to delete the game, if successful calls <code>games()</code>.</td>
                </tr>
            </tbody>
        </table>
    </div>
    <p>
        Some parts of this may be repeated in <a herf="#pages">pages.js</a>, but this code was mostly ported from an
        older build and rewriting isn't worth it.
    </p>
</main>